var c=Object.defineProperty;var l=Object.getOwnPropertySymbols;var a=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var u=(t,o,e)=>o in t?c(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,f=(t,o)=>{for(var e in o||(o={}))a.call(o,e)&&u(t,e,o[e]);if(l)for(var e of l(o))p.call(o,e)&&u(t,e,o[e]);return t};import{minify as g}from"html-minifier-terser";import{join as d}from"path";import{glob as y}from"glob";import{readFile as b,writeFile as v}from"fs/promises";var i="vite-plugin-minify";function h(t){let o;return{name:i,enforce:"post",apply:"build",configResolved:e=>{o=e},closeBundle:()=>{y(d(o.build.outDir,"**","*.html"),(e,m)=>{if(e)return console.error(`[${i}]`,e);m.forEach(async r=>{try{let n=await b(r,{encoding:"utf-8"}),s=await g(n.toString(),f({removeComments:!0,collapseWhitespace:!0,collapseBooleanAttributes:!0,removeAttributeQuotes:!1,removeEmptyAttributes:!0,minifyCSS:!0,minifyJS:!0,minifyURLs:!0},t));await v(r,s,"utf-8"),console.log(`[${i}]`,`minified ${r}`)}catch(n){console.error(`[${i}]`,n)}})})}}}var $=h;export{h as ViteMinifyPlugin,$ as default};
//# sourceMappingURL=index.mjs.map