var c=Object.defineProperty;var l=Object.getOwnPropertySymbols;var a=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var u=(i,t,e)=>t in i?c(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e,f=(i,t)=>{for(var e in t||(t={}))a.call(t,e)&&u(i,e,t[e]);if(l)for(var e of l(t))p.call(t,e)&&u(i,e,t[e]);return i};import{minify as g}from"html-minifier-terser";import{glob as d}from"glob";import{readFile as y,writeFile as b}from"fs/promises";var o="vite-plugin-minify";function v(i){let t;return{name:o,enforce:"post",apply:"build",configResolved:e=>{t=e},closeBundle:()=>{d(`${t.build.outDir}/**/*.html`,(e,m)=>{if(e)return console.error(`[${o}]`,e);m.forEach(async r=>{try{let n=await y(r,{encoding:"utf-8"}),s=await g(n.toString(),f({removeComments:!0,collapseWhitespace:!0,collapseBooleanAttributes:!0,removeAttributeQuotes:!1,removeEmptyAttributes:!0,minifyCSS:!0,minifyJS:!0,minifyURLs:!0},i));await b(r,s,"utf-8"),console.log(`[${o}]`,`minified ${r}`)}catch(n){console.error(`[${o}]`,n)}})})}}}var P=v;export{v as ViteMinifyPlugin,P as default};
//# sourceMappingURL=index.mjs.map