var a=Object.defineProperty;var l=Object.getOwnPropertySymbols;var c=Object.prototype.hasOwnProperty,p=Object.prototype.propertyIsEnumerable;var m=(t,o,e)=>o in t?a(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,u=(t,o)=>{for(var e in o||(o={}))c.call(o,e)&&m(t,e,o[e]);if(l)for(var e of l(o))p.call(o,e)&&m(t,e,o[e]);return t};import{minify as g}from"html-minifier-terser";import{glob as d}from"glob";import{readFile as y,writeFile as b}from"fs/promises";import{normalize as v}from"path";var i="vite-plugin-minify";function $(t){let o;return{name:i,enforce:"post",apply:"build",configResolved:e=>{o=e},closeBundle:()=>{d(v(`${o.build.outDir}/**/*.html`).replace(/\\/g,"/"),(e,f)=>{if(e)return console.error(`[${i}]`,e);f.forEach(async r=>{try{let n=await y(r,{encoding:"utf-8"}),s=await g(n.toString(),u({removeComments:!0,collapseWhitespace:!0,collapseBooleanAttributes:!0,removeAttributeQuotes:!1,removeEmptyAttributes:!0,minifyCSS:!0,minifyJS:!0,minifyURLs:!0},t));await b(r,s,"utf-8"),console.log(`[${i}]`,`minified ${r}`)}catch(n){console.error(`[${i}]`,n)}})})}}}var S=$;export{$ as ViteMinifyPlugin,S as default};
//# sourceMappingURL=index.mjs.map