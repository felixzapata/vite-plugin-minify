var n=Object.defineProperty;var v=Object.getOwnPropertyDescriptor;var $=Object.getOwnPropertyNames,s=Object.getOwnPropertySymbols;var c=Object.prototype.hasOwnProperty,h=Object.prototype.propertyIsEnumerable;var a=(t,e,o)=>e in t?n(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,p=(t,e)=>{for(var o in e||(e={}))c.call(e,o)&&a(t,o,e[o]);if(s)for(var o of s(e))h.call(e,o)&&a(t,o,e[o]);return t};var w=(t,e)=>{for(var o in e)n(t,o,{get:e[o],enumerable:!0})},A=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of $(e))!c.call(t,i)&&i!==o&&n(t,i,{get:()=>e[i],enumerable:!(r=v(e,i))||r.enumerable});return t};var C=t=>A(n({},"__esModule",{value:!0}),t);var R={};w(R,{ViteMinifyPlugin:()=>y,default:()=>P});module.exports=C(R);var g=require("html-minifier-terser"),d=require("glob"),m=require("fs/promises"),u=require("path"),l="vite-plugin-minify";function y(t){let e;return{name:l,enforce:"post",apply:"build",configResolved:o=>{e=o},closeBundle:()=>{(0,d.glob)((0,u.normalize)(`${(0,u.basename)(e.build.outDir)}/**/*.html`).replace(/\\/g,"/"),(o,r)=>{if(o)return console.error(`[${l}]`,o);r.forEach(async i=>{try{let f=await(0,m.readFile)(i,{encoding:"utf-8"}),b=await(0,g.minify)(f.toString(),p({removeComments:!0,collapseWhitespace:!0,collapseBooleanAttributes:!0,removeAttributeQuotes:!1,removeEmptyAttributes:!0,minifyCSS:!0,minifyJS:!0,minifyURLs:!0},t));await(0,m.writeFile)(i,b,"utf-8"),console.log(`[${l}]`,`minified ${i}`)}catch(f){console.error(`[${l}]`,f)}})})}}}var P=y;0&&(module.exports={ViteMinifyPlugin});
//# sourceMappingURL=index.js.map